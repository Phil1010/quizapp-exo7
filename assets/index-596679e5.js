(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function X(){}function Me(e){return e()}function Qe(){return Object.create(null)}function oe(e){e.forEach(Me)}function Te(e){return typeof e=="function"}function Oe(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Re(e){return Object.keys(e).length===0}function l(e,t){e.appendChild(t)}function L(e,t,n){e.insertBefore(t,n||null)}function I(e){e.parentNode&&e.parentNode.removeChild(e)}function Ve(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function a(e){return document.createElement(e)}function w(e){return document.createTextNode(e)}function y(){return w(" ")}function te(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function b(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Be(e){return Array.from(e.childNodes)}function J(e,t){t=""+t,e.data!==t&&(e.data=t)}function F(e,t,n,o){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}let ue;function ie(e){ue=e}function Pe(){if(!ue)throw new Error("Function called outside component initialization");return ue}function Ue(e){Pe().$$.on_mount.push(e)}function Fe(e){Pe().$$.after_update.push(e)}const ee=[],xe=[];let ne=[];const ke=[],Je=Promise.resolve();let Se=!1;function We(){Se||(Se=!0,Je.then(je))}function we(e){ne.push(e)}const Ce=new Set;let $=0;function je(){if($!==0)return;const e=ue;do{try{for(;$<ee.length;){const t=ee[$];$++,ie(t),Ke(t.$$)}}catch(t){throw ee.length=0,$=0,t}for(ie(null),ee.length=0,$=0;xe.length;)xe.pop()();for(let t=0;t<ne.length;t+=1){const n=ne[t];Ce.has(n)||(Ce.add(n),n())}ne.length=0}while(ee.length);for(;ke.length;)ke.pop()();Se=!1,Ce.clear(),ie(e)}function Ke(e){if(e.fragment!==null){e.update(),oe(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(we)}}function Ge(e){const t=[],n=[];ne.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),ne=t}const ve=new Set;let G;function Xe(){G={r:0,c:[],p:G}}function Ye(){G.r||oe(G.c),G=G.p}function se(e,t){e&&e.i&&(ve.delete(e),e.i(t))}function Ee(e,t,n,o){if(e&&e.o){if(ve.has(e))return;ve.add(e),G.c.push(()=>{ve.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}else o&&o()}function Ze(e){e&&e.c()}function ze(e,t,n,o){const{fragment:r,after_update:s}=e.$$;r&&r.m(t,n),o||we(()=>{const c=e.$$.on_mount.map(Me).filter(Te);e.$$.on_destroy?e.$$.on_destroy.push(...c):oe(c),e.$$.on_mount=[]}),s.forEach(we)}function He(e,t){const n=e.$$;n.fragment!==null&&(Ge(n.after_update),oe(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function $e(e,t){e.$$.dirty[0]===-1&&(ee.push(e),We(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ae(e,t,n,o,r,s,c,h=[-1]){const p=ue;ie(e);const i=e.$$={fragment:null,ctx:[],props:s,update:X,not_equal:r,bound:Qe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(p?p.$$.context:[])),callbacks:Qe(),dirty:h,skip_bound:!1,root:t.target||p.$$.root};c&&c(i.root);let u=!1;if(i.ctx=n?n(e,t.props||{},(C,N,...S)=>{const Q=S.length?S[0]:N;return i.ctx&&r(i.ctx[C],i.ctx[C]=Q)&&(!i.skip_bound&&i.bound[C]&&i.bound[C](Q),u&&$e(e,C)),N}):[],i.update(),u=!0,oe(i.before_update),i.fragment=o?o(i.ctx):!1,t.target){if(t.hydrate){const C=Be(t.target);i.fragment&&i.fragment.l(C),C.forEach(I)}else i.fragment&&i.fragment.c();t.intro&&se(e.$$.fragment),ze(e,t.target,t.anchor,t.customElement),je()}ie(p)}class De{$destroy(){He(this,1),this.$destroy=X}$on(t,n){if(!Te(n))return X;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const r=o.indexOf(n);r!==-1&&o.splice(r,1)}}$set(t){this.$$set&&!Re(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Ie(e,t,n){const o=e.slice();return o[7]=t[n],o[9]=n,o}function Le(e){let t,n,o,r,s=e[7]+"",c,h,p;return{c(){t=a("div"),n=a("input"),o=y(),r=a("label"),c=w(s),b(n,"type","checkbox"),b(n,"id","proposition"),b(n,"name","proposition"),n.value=e[9],b(r,"for",e[9]),b(r,"class","svelte-11q0let"),b(t,"class","proposition")},m(i,u){L(i,t,u),l(t,n),l(t,o),l(t,r),l(r,c),h||(p=te(n,"click",e[4]),h=!0)},p(i,u){u&4&&s!==(s=i[7]+"")&&J(c,s)},d(i){i&&I(t),h=!1,p()}}}function et(e){let t,n,o,r,s,c,h,p,i,u,C=e[1].index+"",N,S,Q,O,P,T,_,f,E,D,z=e[2],g=[];for(let v=0;v<z.length;v+=1)g[v]=Le(Ie(e,z,v));return{c(){t=a("main"),n=a("div"),o=a("h1"),r=w("Question "),s=w(e[0]),c=w("/"),h=w(e[3]),p=y(),i=a("h3"),u=w("id : "),N=w(C),S=y(),Q=a("div"),O=a("div"),P=y(),T=a("br"),_=y(),f=a("div");for(let v=0;v<g.length;v+=1)g[v].c();E=y(),D=a("br"),b(O,"id","questionTexte"),b(f,"class","propositions"),b(Q,"class","enonce"),b(n,"class","question")},m(v,j){L(v,t,j),l(t,n),l(n,o),l(o,r),l(o,s),l(o,c),l(o,h),l(n,p),l(n,i),l(i,u),l(i,N),l(n,S),l(n,Q),l(Q,O),l(Q,P),l(Q,T),l(Q,_),l(Q,f);for(let q=0;q<g.length;q+=1)g[q]&&g[q].m(f,null);l(f,E),l(f,D)},p(v,[j]){if(j&1&&J(s,v[0]),j&8&&J(h,v[3]),j&2&&C!==(C=v[1].index+"")&&J(N,C),j&20){z=v[2];let q;for(q=0;q<z.length;q+=1){const K=Ie(v,z,q);g[q]?g[q].p(K,j):(g[q]=Le(K),g[q].c(),g[q].m(f,E))}for(;q<g.length;q+=1)g[q].d(1);g.length=z.length}},i:X,o:X,d(v){v&&I(t),Ve(g,v)}}}function tt(){const e=[];return document.querySelectorAll("input[type=checkbox]").forEach(t=>{t.checked&&e.push(t.value)}),e}function nt(e,t,n){let{question:o}=t,{propositions:r}=t,{onSelectedValue:s}=t,{nbQuestions:c}=t,{cpt:h=0}=t;function p(){const u=tt();s(u)}function i(){var u=document.getElementById("questionTexte");u.innerHTML=o.texte,MathJax.typesetPromise([u]).catch(C=>console.error(C))}return Fe(()=>{i(),document.querySelectorAll("input[type=checkbox]").forEach(u=>{u.checked=!1}),n(0,h++,h)}),e.$$set=u=>{"question"in u&&n(1,o=u.question),"propositions"in u&&n(2,r=u.propositions),"onSelectedValue"in u&&n(5,s=u.onSelectedValue),"nbQuestions"in u&&n(3,c=u.nbQuestions),"cpt"in u&&n(0,h=u.cpt)},[h,o,r,c,p,s,i]}class ot extends De{constructor(t){super(),Ae(this,t,nt,et,Oe,{question:1,propositions:2,onSelectedValue:5,nbQuestions:3,cpt:0,compileFormuleMathematique:6})}get compileFormuleMathematique(){return this.$$.ctx[6]}}function lt(e){let t,n,o,r,s,c,h,p,i,u,C,N,S,Q,O;function P(f,E){if(f[10]==null)return it;if(f[10]!="")return rt}let T=P(e),_=T&&T(e);return{c(){t=a("h1"),t.textContent="Bienvenue !",n=y(),_&&_.c(),o=y(),r=a("h3"),s=w("Le quiz contient "),c=w(e[7]),h=w(" questions. "),p=a("br"),i=w(`
        Si vous etes prêt(e) appuyez sur le bouton commencer !`),u=y(),C=a("br"),N=y(),S=a("button"),S.textContent="Commencer",b(S,"id","btnStart"),b(S,"class","svelte-6vchrc")},m(f,E){L(f,t,E),L(f,n,E),_&&_.m(f,E),L(f,o,E),L(f,r,E),l(r,s),l(r,c),l(r,h),l(r,p),l(r,i),L(f,u,E),L(f,C,E),L(f,N,E),L(f,S,E),Q||(O=te(S,"click",e[12]),Q=!0)},p(f,E){_&&_.p(f,E),E[0]&128&&J(c,f[7])},d(f){f&&I(t),f&&I(n),_&&_.d(f),f&&I(o),f&&I(r),f&&I(u),f&&I(C),f&&I(N),f&&I(S),Q=!1,O()}}}function rt(e){let t;return{c(){t=a("h3"),t.textContent=`Bonjour ${e[10]}`},m(n,o){L(n,t,o)},p:X,d(n){n&&I(t)}}}function it(e){let t,n,o,r,s,c,h,p;return{c(){t=w(`Entrez votre pseudo (facultatif)
        `),n=a("br"),o=y(),r=a("br"),s=y(),c=a("input"),h=y(),p=a("br"),b(c,"id","pseudo"),b(c,"type","text"),F(c,"border-radius","5%"),b(c,"maxlength","15"),b(c,"class","svelte-6vchrc")},m(i,u){L(i,t,u),L(i,n,u),L(i,o,u),L(i,r,u),L(i,s,u),L(i,c,u),L(i,h,u),L(i,p,u)},p:X,d(i){i&&I(t),i&&I(n),i&&I(o),i&&I(r),i&&I(s),i&&I(c),i&&I(h),i&&I(p)}}}function Ne(e){let t,n;return t=new ot({props:{question:e[0][e[1]],propositions:e[2][e[1]],onSelectedValue:e[11],nbQuestions:e[0].length}}),{c(){Ze(t.$$.fragment)},m(o,r){ze(t,o,r),n=!0},p(o,r){const s={};r[0]&3&&(s.question=o[0][o[1]]),r[0]&6&&(s.propositions=o[2][o[1]]),r[0]&1&&(s.nbQuestions=o[0].length),t.$set(s)},i(o){n||(se(t.$$.fragment,o),n=!0)},o(o){Ee(t.$$.fragment,o),n=!1},d(o){He(t,o)}}}function st(e){let t,n,o,r,s,c,h,p,i,u,C,N,S,Q,O,P,T,_,f,E,D,z,g,v,j,q,K,le,ce,fe,ae,Y,de,pe,he,W,me,ye,be,R,_e,ge,re,qe,d,m,A,V,M,H,Z,B=e[9]!=null&&lt(e),k=e[0][e[1]]&&Ne(e);return{c(){t=a("main"),n=a("div"),B&&B.c(),o=y(),r=a("div"),k&&k.c(),s=y(),c=a("button"),c.textContent="Next",h=y(),p=a("div"),i=w("Score : "),u=w(e[3]),C=w(" / 20"),N=y(),S=a("div"),Q=w("Temps: "),O=w(e[8]),P=w("s"),T=y(),_=a("div"),f=w("Nombre de bonne réponse : "),E=w(e[4]),D=y(),z=a("br"),g=w(` Nombre de mauvaise
    réponse : `),v=w(e[5]),j=y(),q=a("br"),K=w(" Nombre de question sauté : "),le=w(e[6]),ce=y(),fe=a("br"),ae=y(),Y=a("div"),de=y(),pe=a("br"),he=y(),W=a("button"),W.textContent="Voir le corrigé",me=y(),ye=a("br"),be=y(),R=a("button"),R.textContent="Caché le corrigé",_e=y(),ge=a("br"),re=y(),qe=a("br"),d=y(),m=a("button"),m.textContent="Rejouer",A=y(),V=a("div"),b(n,"class","accueil"),b(r,"class","question"),F(r,"display","none"),b(c,"id","btnNext"),F(c,"display","none"),b(c,"class","svelte-6vchrc"),b(p,"class","score"),F(p,"display","none"),b(S,"class","timer"),F(S,"display","none"),b(_,"class","detailsQuestions"),F(_,"display","none"),b(Y,"id","ligneEnonceCompile"),F(Y,"margin-bottom","5rem"),b(W,"id","voirCorrection"),F(W,"display","none"),b(W,"class","svelte-6vchrc"),b(R,"id","cacherCorrection"),F(R,"display","none"),b(R,"class","svelte-6vchrc"),b(m,"id","btnRejouer"),F(m,"display","none"),b(m,"class","svelte-6vchrc")},m(x,U){L(x,t,U),l(t,n),B&&B.m(n,null),l(t,o),l(t,r),k&&k.m(r,null),l(t,s),l(t,c),l(t,h),l(t,p),l(p,i),l(p,u),l(p,C),l(t,N),l(t,S),l(S,Q),l(S,O),l(S,P),l(t,T),l(t,_),l(_,f),l(_,E),l(_,D),l(_,z),l(_,g),l(_,v),l(_,j),l(_,q),l(_,K),l(_,le),l(t,ce),l(t,fe),l(t,ae),l(t,Y),l(t,de),l(t,pe),l(t,he),l(t,W),l(t,me),l(t,ye),l(t,be),l(t,R),l(t,_e),l(t,ge),l(t,re),l(t,qe),l(t,d),l(t,m),l(t,A),l(t,V),M=!0,H||(Z=[te(c,"click",e[13]),te(W,"click",e[15]),te(R,"click",e[16]),te(m,"click",e[14])],H=!0)},p(x,U){x[9]!=null&&B.p(x,U),x[0][x[1]]?k?(k.p(x,U),U[0]&3&&se(k,1)):(k=Ne(x),k.c(),se(k,1),k.m(r,null)):k&&(Xe(),Ee(k,1,1,()=>{k=null}),Ye()),(!M||U[0]&8)&&J(u,x[3]),(!M||U[0]&256)&&J(O,x[8]),(!M||U[0]&16)&&J(E,x[4]),(!M||U[0]&32)&&J(v,x[5]),(!M||U[0]&64)&&J(le,x[6])},i(x){M||(se(k),M=!0)},o(x){Ee(k),M=!1},d(x){x&&I(t),B&&B.d(),k&&k.d(),H=!1,oe(Z)}}}function ut(){return Date.now().toString()}function ct(){let e=localStorage.getItem("userID");return e||(e=ut(),localStorage.setItem("userID",e)),e}function ft(e,t,n){let o,r=[],s=[],c=0,h=[],p=[],i=null,u=0,C=0,N=0,S=0,Q=0,O=[];const P=new URLSearchParams(window.location.search),T=P.get("c"),_=P.get("r"),f=P.get("p"),E=P.get("i");let D=P.get("n");const z=ct();let g=[],v,j,q=0;Ue(()=>{ae(),ge()});function K(){j=setInterval(()=>{n(8,q++,q)},1e3)}function le(){clearInterval(j)}function ce(d){i=d}function fe(){for(let d=s.length-1;d>0;d--){const m=Math.floor(Math.random()*(d+1));n(0,[s[d],s[m]]=[s[m],s[d]],s),n(2,[h[d],h[m]]=[h[m],h[d]],h),[p[d],p[m]]=[p[m],p[d]]}}async function ae(){try{o=await(await fetch("https://raw.githubusercontent.com/Phil1010/quiz-exo7-stage2023/main/catalogue.json")).json(),Y()}catch(d){console.error("Erreur lors de la récupération des données :",d)}T!=null&&_e()}function Y(){o&&(o.forEach((d,m)=>{if(r.includes(m)){const A={index:m,texte:d.texte};n(0,s=[...s,A]),n(2,h=[...h,d.reponses.map(V=>V.texte)]),p=[...p,d.reponses.map(V=>V.correct)]}}),_=="true"&&fe())}function de(){document.querySelector(".accueil").style.display="none",document.querySelector("#btnNext").style.display="",document.querySelector(".question").style.display="",K()}function pe(){if(n(1,c++,c),i==p[c-1].indexOf(!0))n(3,u++,u),n(4,N++,N),g.push(1);else if(i==null||i.length>1)n(6,Q++,Q),g.push(0);else{const d=u-R/100;n(3,u=d),n(5,S++,S),g.push(-1)}c==s.length&&(u<0&&n(3,u=0),n(3,u=u*20/s.length),he()),O.push(h[c-1][i]),i=null}function he(){document.querySelector(".score").style.display="",document.querySelector("#btnNext").style.display="none",document.querySelector("#btnRejouer").style.display="",document.querySelector(".timer").style.display="",document.querySelector(".detailsQuestions").style.display="",document.querySelector("#voirCorrection").style.display="",le(),re(),g=g.map(m=>{if(m==-1)return 2;if(m==0)return 0;if(m==1)return 1}),g=g.join(""),W();var d={quizID:E,quizContent:T,userID:z,userNick:D,results:g,elapsedTime:q,note:C,penalite:f};console.log(d)}function W(){var d={quizID:E,quizContent:T,userID:z,userNick:D,results:g,elapsedTime:q,note:re(),penalite:f};fetch("http://damienmegy.xyz/php/quizapp-exo7/quiz_fini.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}).then(m=>{m.ok?console.log("Données envoyées avec succès !"):console.error("Erreur lors de l'envoi des données.")}).catch(m=>{console.error("Erreur lors de l'envoi des données:",m)})}function me(){const d=document.getElementById("pseudo");if(d!==null){const m=d.value,A=new URL(window.location.href);m!==""&&A.searchParams.set("n",m),window.location.href=A.toString()}D!=null&&(console.log("il a déjà un pseudo"),window.location.reload())}function ye(){be(),document.querySelector("#voirCorrection").style.display="none",document.querySelector("#cacherCorrection").style.display=""}function be(){var d=document.getElementById("ligneEnonceCompile"),m=document.createElement("table");m.style.borderCollapse="collapse";var A=m.insertRow(),V=A.insertCell();V.innerHTML="Questions",V.style.fontWeight="bold",V.style.border="1px solid white";var M=A.insertCell();M.innerHTML="Corrections",M.style.fontWeight="bold",M.style.border="1px solid white";var M=A.insertCell();M.innerHTML="Vos réponses",M.style.fontWeight="bold",M.style.border="1px solid white",s.forEach(H=>{var Z=m.insertRow(),B=Z.insertCell();B.innerHTML="Q."+[s.indexOf(H)+1]+"/"+v+" Id."+H.index+" : "+H.texte,B.style.border="1px solid white";var k=Z.insertCell();k.innerHTML=h[s.indexOf(H)][p[s.indexOf(H)].indexOf(!0)],k.style.border="1px solid white";var x=Z.insertCell();x.innerHTML=O[s.indexOf(H)],x.style.border="1px solid white",x.innerHTML=="undefined"&&(x.innerHTML="Question sauté / Réponse invalide")}),d.appendChild(m),MathJax.typesetPromise([d]).catch(H=>console.error(H))}let R=0;if(f){const d=parseInt(f);!isNaN(d)&&d>=0&&d<=100?R=d:console.error("Erreur lors de la récupération du pourcentage de pénalité :",f)}function _e(){n(7,v=T.split(" ").length)}function ge(){if(T==null){document.querySelector(".accueil").innerHTML="<h1>Bienvenue !</h1> <br> <h3>Pour commencer, veuillez saisir une liste de question dans les paramètres de l'URL. <br> Voici par exemple un quiz contenant les question : 1,2,3,4 et 5 avec l'ordre d'affichage des questions randomnisées et sans pénalité : <br> <a href='https://phil1010.github.io/quizapp-exo7/?listeQuestions=1+2+3+4+5&rand=true&p=0'>https://phil1010.github.io/quizapp-exo7/?listeQuestions=1+2+3+4+5&rand=true&p=0</a> </h3> ",document.querySelector("#btnNext").style.display="none";return}r.push(...T.split(" ")),r=r.map(d=>parseInt(d))}function re(){C=u*100/20}return[s,c,h,u,N,S,Q,v,q,T,D,ce,de,pe,me,ye,()=>{document.querySelector("#voirCorrection").style.display="",document.querySelector("#cacherCorrection").style.display="none",document.querySelector("#ligneEnonceCompile").innerHTML=""}]}class at extends De{constructor(t){super(),Ae(this,t,ft,st,Oe,{},null,[-1,-1])}}new at({target:document.getElementById("app")});
