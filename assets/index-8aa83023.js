(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function ne(){}function Me(e){return e()}function Qe(){return Object.create(null)}function oe(e){e.forEach(Me)}function Te(e){return typeof e=="function"}function He(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function De(e){return Object.keys(e).length===0}function l(e,t){e.appendChild(t)}function N(e,t,n){e.insertBefore(t,n||null)}function k(e){e.parentNode&&e.parentNode.removeChild(e)}function Ve(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function d(e){return document.createElement(e)}function q(e){return document.createTextNode(e)}function b(){return q(" ")}function ee(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function _(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Be(e){return Array.from(e.childNodes)}function A(e,t){t=""+t,e.data!==t&&(e.data=t)}function U(e,t,n,o){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}let se;function re(e){se=e}function Oe(){if(!se)throw new Error("Function called outside component initialization");return se}function Fe(e){Oe().$$.on_mount.push(e)}function Ue(e){Oe().$$.after_update.push(e)}const $=[],xe=[];let te=[];const Le=[],Je=Promise.resolve();let Ce=!1;function We(){Ce||(Ce=!0,Je.then(Pe))}function we(e){te.push(e)}const Se=new Set;let Z=0;function Pe(){if(Z!==0)return;const e=se;do{try{for(;Z<$.length;){const t=$[Z];Z++,re(t),Xe(t.$$)}}catch(t){throw $.length=0,Z=0,t}for(re(null),$.length=0,Z=0;xe.length;)xe.pop()();for(let t=0;t<te.length;t+=1){const n=te[t];Se.has(n)||(Se.add(n),n())}te.length=0}while($.length);for(;Le.length;)Le.pop()();Ce=!1,Se.clear(),re(e)}function Xe(e){if(e.fragment!==null){e.update(),oe(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(we)}}function Ke(e){const t=[],n=[];te.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),te=t}const ve=new Set;let K;function Ge(){K={r:0,c:[],p:K}}function Ye(){K.r||oe(K.c),K=K.p}function ie(e,t){e&&e.i&&(ve.delete(e),e.i(t))}function Ee(e,t,n,o){if(e&&e.o){if(ve.has(e))return;ve.add(e),K.c.push(()=>{ve.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}else o&&o()}function Ze(e){e&&e.c()}function je(e,t,n,o){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,n),o||we(()=>{const c=e.$$.on_mount.map(Me).filter(Te);e.$$.on_destroy?e.$$.on_destroy.push(...c):oe(c),e.$$.on_mount=[]}),i.forEach(we)}function ze(e,t){const n=e.$$;n.fragment!==null&&(Ke(n.after_update),oe(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function $e(e,t){e.$$.dirty[0]===-1&&($.push(e),We(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Re(e,t,n,o,r,i,c,h=[-1]){const p=se;re(e);const s=e.$$={fragment:null,ctx:[],props:i,update:ne,not_equal:r,bound:Qe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(p?p.$$.context:[])),callbacks:Qe(),dirty:h,skip_bound:!1,root:t.target||p.$$.root};c&&c(s.root);let u=!1;if(s.ctx=n?n(e,t.props||{},(S,M,...C)=>{const Q=C.length?C[0]:M;return s.ctx&&r(s.ctx[S],s.ctx[S]=Q)&&(!s.skip_bound&&s.bound[S]&&s.bound[S](Q),u&&$e(e,S)),M}):[],s.update(),u=!0,oe(s.before_update),s.fragment=o?o(s.ctx):!1,t.target){if(t.hydrate){const S=Be(t.target);s.fragment&&s.fragment.l(S),S.forEach(k)}else s.fragment&&s.fragment.c();t.intro&&ie(e.$$.fragment),je(e,t.target,t.anchor,t.customElement),Pe()}re(p)}class Ae{$destroy(){ze(this,1),this.$destroy=ne}$on(t,n){if(!Te(n))return ne;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const r=o.indexOf(n);r!==-1&&o.splice(r,1)}}$set(t){this.$$set&&!De(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function ke(e,t,n){const o=e.slice();return o[7]=t[n],o[9]=n,o}function Ne(e){let t,n,o,r,i=e[7]+"",c,h,p;return{c(){t=d("div"),n=d("input"),o=b(),r=d("label"),c=q(i),_(n,"type","checkbox"),_(n,"id","proposition"),_(n,"name","proposition"),n.value=e[9],_(r,"for",e[9]),_(r,"class","svelte-11q0let"),_(t,"class","proposition")},m(s,u){N(s,t,u),l(t,n),l(t,o),l(t,r),l(r,c),h||(p=ee(n,"click",e[4]),h=!0)},p(s,u){u&4&&i!==(i=s[7]+"")&&A(c,i)},d(s){s&&k(t),h=!1,p()}}}function et(e){let t,n,o,r,i,c,h,p,s,u,S=e[1].index+"",M,C,Q,P,O,I,m,f,w,H,R=e[2],g=[];for(let v=0;v<R.length;v+=1)g[v]=Ne(ke(e,R,v));return{c(){t=d("main"),n=d("div"),o=d("h1"),r=q("Question "),i=q(e[0]),c=q("/"),h=q(e[3]),p=b(),s=d("h3"),u=q("id : "),M=q(S),C=b(),Q=d("div"),P=d("div"),O=b(),I=d("br"),m=b(),f=d("div");for(let v=0;v<g.length;v+=1)g[v].c();w=b(),H=d("br"),_(P,"id","questionTexte"),_(f,"class","propositions"),_(Q,"class","enonce"),_(n,"class","question")},m(v,j){N(v,t,j),l(t,n),l(n,o),l(o,r),l(o,i),l(o,c),l(o,h),l(n,p),l(n,s),l(s,u),l(s,M),l(n,C),l(n,Q),l(Q,P),l(Q,O),l(Q,I),l(Q,m),l(Q,f);for(let E=0;E<g.length;E+=1)g[E]&&g[E].m(f,null);l(f,w),l(f,H)},p(v,[j]){if(j&1&&A(i,v[0]),j&8&&A(h,v[3]),j&2&&S!==(S=v[1].index+"")&&A(M,S),j&20){R=v[2];let E;for(E=0;E<R.length;E+=1){const X=ke(v,R,E);g[E]?g[E].p(X,j):(g[E]=Ne(X),g[E].c(),g[E].m(f,w))}for(;E<g.length;E+=1)g[E].d(1);g.length=R.length}},i:ne,o:ne,d(v){v&&k(t),Ve(g,v)}}}function tt(){const e=[];return document.querySelectorAll("input[type=checkbox]").forEach(t=>{t.checked&&e.push(t.value)}),e}function nt(e,t,n){let{question:o}=t,{propositions:r}=t,{onSelectedValue:i}=t,{nbQuestions:c}=t,{cpt:h=0}=t;function p(){const u=tt();i(u)}function s(){var u=document.getElementById("questionTexte");u.innerHTML=o.texte,MathJax.typesetPromise([u]).catch(S=>console.error(S))}return Ue(()=>{s(),document.querySelectorAll("input[type=checkbox]").forEach(u=>{u.checked=!1}),n(0,h++,h)}),e.$$set=u=>{"question"in u&&n(1,o=u.question),"propositions"in u&&n(2,r=u.propositions),"onSelectedValue"in u&&n(5,i=u.onSelectedValue),"nbQuestions"in u&&n(3,c=u.nbQuestions),"cpt"in u&&n(0,h=u.cpt)},[h,o,r,c,p,i,s]}class ot extends Ae{constructor(t){super(),Re(this,t,nt,et,He,{question:1,propositions:2,onSelectedValue:5,nbQuestions:3,cpt:0,compileFormuleMathematique:6})}get compileFormuleMathematique(){return this.$$.ctx[6]}}function lt(e){let t,n,o,r,i,c,h,p,s,u,S,M,C,Q,P;function O(f,w){if(f[7]==null)return it;if(f[7]!="")return rt}let I=O(e),m=I&&I(e);return{c(){t=d("h1"),t.textContent="Bienvenue !",n=b(),m&&m.c(),o=b(),r=d("h3"),i=q("Le quiz contient "),c=q(e[8]),h=q(" questions. "),p=d("br"),s=q(`
        Si vous etes prêt(e) appuyez sur le bouton commencer !`),u=b(),S=d("br"),M=b(),C=d("button"),C.textContent="Commencer",_(C,"id","btnStart"),_(C,"class","svelte-6vchrc")},m(f,w){N(f,t,w),N(f,n,w),m&&m.m(f,w),N(f,o,w),N(f,r,w),l(r,i),l(r,c),l(r,h),l(r,p),l(r,s),N(f,u,w),N(f,S,w),N(f,M,w),N(f,C,w),Q||(P=ee(C,"click",e[12]),Q=!0)},p(f,w){I===(I=O(f))&&m?m.p(f,w):(m&&m.d(1),m=I&&I(f),m&&(m.c(),m.m(o.parentNode,o))),w[0]&256&&A(c,f[8])},d(f){f&&k(t),f&&k(n),m&&m.d(f),f&&k(o),f&&k(r),f&&k(u),f&&k(S),f&&k(M),f&&k(C),Q=!1,P()}}}function rt(e){let t,n,o;return{c(){t=d("h3"),n=q("Bonjour "),o=q(e[7])},m(r,i){N(r,t,i),l(t,n),l(t,o)},p(r,i){i[0]&128&&A(o,r[7])},d(r){r&&k(t)}}}function it(e){let t,n,o,r,i,c,h,p;return{c(){t=q(`Entrez votre pseudo (facultatif)
        `),n=d("br"),o=b(),r=d("br"),i=b(),c=d("input"),h=b(),p=d("br"),_(c,"id","pseudo"),_(c,"type","text"),U(c,"border-radius","5%"),_(c,"maxlength","15"),_(c,"class","svelte-6vchrc")},m(s,u){N(s,t,u),N(s,n,u),N(s,o,u),N(s,r,u),N(s,i,u),N(s,c,u),N(s,h,u),N(s,p,u)},p:ne,d(s){s&&k(t),s&&k(n),s&&k(o),s&&k(r),s&&k(i),s&&k(c),s&&k(h),s&&k(p)}}}function Ie(e){let t,n;return t=new ot({props:{question:e[0][e[1]],propositions:e[2][e[1]],onSelectedValue:e[11],nbQuestions:e[0].length}}),{c(){Ze(t.$$.fragment)},m(o,r){je(t,o,r),n=!0},p(o,r){const i={};r[0]&3&&(i.question=o[0][o[1]]),r[0]&6&&(i.propositions=o[2][o[1]]),r[0]&1&&(i.nbQuestions=o[0].length),t.$set(i)},i(o){n||(ie(t.$$.fragment,o),n=!0)},o(o){Ee(t.$$.fragment,o),n=!1},d(o){ze(t,o)}}}function st(e){let t,n,o,r,i,c,h,p,s,u,S,M,C,Q,P,O,I,m,f,w,H,R,g,v,j,E,X,le,ue,ce,fe,G,ae,de,pe,J,he,me,ye,D,be,_e,ge,qe,a,y,W,V,T,z,Y,B=e[10]!=null&&lt(e),L=e[0][e[1]]&&Ie(e);return{c(){t=d("main"),n=d("div"),B&&B.c(),o=b(),r=d("div"),L&&L.c(),i=b(),c=d("button"),c.textContent="Next",h=b(),p=d("div"),s=q("Score : "),u=q(e[3]),S=q(" / 20"),M=b(),C=d("div"),Q=q("Temps: "),P=q(e[9]),O=q("s"),I=b(),m=d("div"),f=q("Nombre de bonne réponse : "),w=q(e[4]),H=b(),R=d("br"),g=q(` Nombre de mauvaise
    réponse : `),v=q(e[5]),j=b(),E=d("br"),X=q(" Nombre de question sauté : "),le=q(e[6]),ue=b(),ce=d("br"),fe=b(),G=d("div"),ae=b(),de=d("br"),pe=b(),J=d("button"),J.textContent="Voir le corrigé",he=b(),me=d("br"),ye=b(),D=d("button"),D.textContent="Caché le corrigé",be=b(),_e=d("br"),ge=b(),qe=d("br"),a=b(),y=d("button"),y.textContent="Rejouer",W=b(),V=d("div"),_(n,"class","accueil"),_(r,"class","question"),U(r,"display","none"),_(c,"id","btnNext"),U(c,"display","none"),_(c,"class","svelte-6vchrc"),_(p,"class","score"),U(p,"display","none"),_(C,"class","timer"),U(C,"display","none"),_(m,"class","detailsQuestions"),U(m,"display","none"),_(G,"id","ligneEnonceCompile"),U(G,"margin-bottom","5rem"),_(J,"id","voirCorrection"),U(J,"display","none"),_(J,"class","svelte-6vchrc"),_(D,"id","cacherCorrection"),U(D,"display","none"),_(D,"class","svelte-6vchrc"),_(y,"id","btnRejouer"),U(y,"display","none"),_(y,"class","svelte-6vchrc")},m(x,F){N(x,t,F),l(t,n),B&&B.m(n,null),l(t,o),l(t,r),L&&L.m(r,null),l(t,i),l(t,c),l(t,h),l(t,p),l(p,s),l(p,u),l(p,S),l(t,M),l(t,C),l(C,Q),l(C,P),l(C,O),l(t,I),l(t,m),l(m,f),l(m,w),l(m,H),l(m,R),l(m,g),l(m,v),l(m,j),l(m,E),l(m,X),l(m,le),l(t,ue),l(t,ce),l(t,fe),l(t,G),l(t,ae),l(t,de),l(t,pe),l(t,J),l(t,he),l(t,me),l(t,ye),l(t,D),l(t,be),l(t,_e),l(t,ge),l(t,qe),l(t,a),l(t,y),l(t,W),l(t,V),T=!0,z||(Y=[ee(c,"click",e[13]),ee(J,"click",e[15]),ee(D,"click",e[16]),ee(y,"click",e[14])],z=!0)},p(x,F){x[10]!=null&&B.p(x,F),x[0][x[1]]?L?(L.p(x,F),F[0]&3&&ie(L,1)):(L=Ie(x),L.c(),ie(L,1),L.m(r,null)):L&&(Ge(),Ee(L,1,1,()=>{L=null}),Ye()),(!T||F[0]&8)&&A(u,x[3]),(!T||F[0]&512)&&A(P,x[9]),(!T||F[0]&16)&&A(w,x[4]),(!T||F[0]&32)&&A(v,x[5]),(!T||F[0]&64)&&A(le,x[6])},i(x){T||(ie(L),T=!0)},o(x){Ee(L),T=!1},d(x){x&&k(t),B&&B.d(),L&&L.d(),z=!1,oe(Y)}}}function ut(){return Date.now().toString()}function ct(){let e=localStorage.getItem("userID");return e||(e=ut(),localStorage.setItem("userID",e)),e}function ft(e,t,n){let o,r=[],i=[],c=0,h=[],p=[],s=null,u=0,S=0,M=0,C=0,Q=0,P=[];const O=new URLSearchParams(window.location.search),I=O.get("c"),m=O.get("r"),f=O.get("p");let w=O.get("i"),H=O.get("n");const R=ct();let g=[],v,j,E=0;Fe(()=>{fe(),_e()});function X(){j=setInterval(()=>{n(9,E++,E)},1e3)}function le(){clearInterval(j)}function ue(a){s=a}function ce(){for(let a=i.length-1;a>0;a--){const y=Math.floor(Math.random()*(a+1));n(0,[i[a],i[y]]=[i[y],i[a]],i),n(2,[h[a],h[y]]=[h[y],h[a]],h),[p[a],p[y]]=[p[y],p[a]]}}async function fe(){try{o=await(await fetch("https://raw.githubusercontent.com/Phil1010/quiz-exo7-stage2023/main/catalogue.json")).json(),G()}catch(a){console.error("Erreur lors de la récupération des données :",a)}I!=null&&be()}function G(){o&&(o.forEach((a,y)=>{if(r.includes(y)){const W={index:y,texte:a.texte};n(0,i=[...i,W]),n(2,h=[...h,a.reponses.map(V=>V.texte)]),p=[...p,a.reponses.map(V=>V.correct)]}}),m=="1"&&ce())}function ae(){document.querySelector(".accueil").style.display="none",document.querySelector("#btnNext").style.display="",document.querySelector(".question").style.display="",X(),H==null&&n(7,H=document.getElementById("pseudo").value),console.log(H)}function de(){if(n(1,c++,c),s==p[c-1].indexOf(!0))n(3,u++,u),n(4,M++,M),g.push(1);else if(s==null||s.length>1)n(6,Q++,Q),g.push(0);else{const a=u-D/100;n(3,u=a),n(5,C++,C),g.push(-1)}c==i.length&&(u<0&&n(3,u=0),n(3,u=u*20/i.length),pe()),P.push(h[c-1][s]),s=null}function pe(){document.querySelector(".score").style.display="",document.querySelector("#btnNext").style.display="none",document.querySelector("#btnRejouer").style.display="",document.querySelector(".timer").style.display="",document.querySelector(".detailsQuestions").style.display="",document.querySelector("#voirCorrection").style.display="",le(),ge(),g=g.map(a=>{if(a==-1)return 2;if(a==0)return 0;if(a==1)return 1}),g=g.join(""),J()}function J(){w==null&&(w=""),H==null&&n(7,H="");var a=JSON.stringify({quizID:w,quizContent:I,userID:R,userName:H,results:g,elapsedTime:E,note:S.toString(),penalite:f}),y=new XMLHttpRequest;y.open("POST","https://twisting-sign.000webhostapp.com/quiz_fini.php",!0),y.setRequestHeader("Content-Type","application/json"),y.onreadystatechange=function(){y.readyState===XMLHttpRequest.DONE&&(y.status===200?console.log("Réponse du serveur :",y.responseText):console.error("Erreur lors de la requête :",y.status,y.statusText))},y.send(a)}function he(){if(H!=null){const a=new URL(window.location.href);a.searchParams.set("n",H),window.location.href=a.toString()}else window.location.reload()}function me(){ye(),document.querySelector("#voirCorrection").style.display="none",document.querySelector("#cacherCorrection").style.display=""}function ye(){var a=document.getElementById("ligneEnonceCompile"),y=document.createElement("table");y.style.borderCollapse="collapse";var W=y.insertRow(),V=W.insertCell();V.innerHTML="Questions",V.style.fontWeight="bold",V.style.border="1px solid white";var T=W.insertCell();T.innerHTML="Corrections",T.style.fontWeight="bold",T.style.border="1px solid white";var T=W.insertCell();T.innerHTML="Vos réponses",T.style.fontWeight="bold",T.style.border="1px solid white",i.forEach(z=>{var Y=y.insertRow(),B=Y.insertCell();B.innerHTML="Q."+[i.indexOf(z)+1]+"/"+v+" Id."+z.index+" : "+z.texte,B.style.border="1px solid white";var L=Y.insertCell();L.innerHTML=h[i.indexOf(z)][p[i.indexOf(z)].indexOf(!0)],L.style.border="1px solid white";var x=Y.insertCell();x.innerHTML=P[i.indexOf(z)],x.style.border="1px solid white",x.innerHTML=="undefined"&&(x.innerHTML="Question sauté / Réponse invalide")}),a.appendChild(y),MathJax.typesetPromise([a]).catch(z=>console.error(z))}let D=0;if(f){const a=parseInt(f);!isNaN(a)&&a>=0&&a<=100?D=a:console.error("Erreur lors de la récupération du pourcentage de pénalité :",f)}function be(){n(8,v=I.split(" ").length)}function _e(){if(I==null){document.querySelector(".accueil").innerHTML="<h1>Bienvenue !</h1> <br> <h3>Pour commencer, veuillez saisir une liste de question dans les paramètres de l'URL. <br> Voici par exemple un quiz contenant les question : 1,2,3,4 et 5 avec l'ordre d'affichage des questions randomnisées et sans pénalité : <br> <a href='https://phil1010.github.io/quizapp-exo7/?c=1+2+3+4+5&r=1&p=0'>https://phil1010.github.io/quizapp-exo7/?c=1+2+3+4+5&r=1&p=0</a> </h3> ",document.querySelector("#btnNext").style.display="none";return}r.push(...I.split(" ")),r=r.map(a=>parseInt(a))}function ge(){S=u*100/20}return[i,c,h,u,M,C,Q,H,v,E,I,ue,ae,de,he,me,()=>{document.querySelector("#voirCorrection").style.display="",document.querySelector("#cacherCorrection").style.display="none",document.querySelector("#ligneEnonceCompile").innerHTML=""}]}class at extends Ae{constructor(t){super(),Re(this,t,ft,st,He,{},null,[-1,-1])}}new at({target:document.getElementById("app")});
