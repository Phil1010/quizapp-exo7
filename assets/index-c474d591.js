(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerPolicy&&(s.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?s.credentials="include":l.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(l){if(l.ep)return;l.ep=!0;const s=n(l);fetch(l.href,s)}})();function Y(){}function Ne(e){return e()}function xe(){return Object.create(null)}function oe(e){e.forEach(Ne)}function Pe(e){return typeof e=="function"}function Te(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Ve(e){return Object.keys(e).length===0}function r(e,t){e.appendChild(t)}function k(e,t,n){e.insertBefore(t,n||null)}function L(e){e.parentNode&&e.parentNode.removeChild(e)}function De(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function a(e){return document.createElement(e)}function C(e){return document.createTextNode(e)}function y(){return C(" ")}function te(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function b(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Be(e){return Array.from(e.childNodes)}function U(e,t){t=""+t,e.data!==t&&(e.data=t)}function B(e,t,n,o){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}let ce;function se(e){ce=e}function He(){if(!ce)throw new Error("Function called outside component initialization");return ce}function Ue(e){He().$$.on_mount.push(e)}function Fe(e){He().$$.after_update.push(e)}const ee=[],Qe=[];let ne=[];const Le=[],Je=Promise.resolve();let Ce=!1;function We(){Ce||(Ce=!0,Je.then(Oe))}function we(e){ne.push(e)}const Se=new Set;let $=0;function Oe(){if($!==0)return;const e=ce;do{try{for(;$<ee.length;){const t=ee[$];$++,se(t),Ke(t.$$)}}catch(t){throw ee.length=0,$=0,t}for(se(null),ee.length=0,$=0;Qe.length;)Qe.pop()();for(let t=0;t<ne.length;t+=1){const n=ne[t];Se.has(n)||(Se.add(n),n())}ne.length=0}while(ee.length);for(;Le.length;)Le.pop()();Ce=!1,Se.clear(),se(e)}function Ke(e){if(e.fragment!==null){e.update(),oe(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(we)}}function Xe(e){const t=[],n=[];ne.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),ne=t}const ge=new Set;let G;function Ge(){G={r:0,c:[],p:G}}function Ye(){G.r||oe(G.c),G=G.p}function ue(e,t){e&&e.i&&(ge.delete(e),e.i(t))}function Ee(e,t,n,o){if(e&&e.o){if(ge.has(e))return;ge.add(e),G.c.push(()=>{ge.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}else o&&o()}function Ze(e){e&&e.c()}function je(e,t,n,o){const{fragment:l,after_update:s}=e.$$;l&&l.m(t,n),o||we(()=>{const c=e.$$.on_mount.map(Ne).filter(Pe);e.$$.on_destroy?e.$$.on_destroy.push(...c):oe(c),e.$$.on_mount=[]}),s.forEach(we)}function ze(e,t){const n=e.$$;n.fragment!==null&&(Xe(n.after_update),oe(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function $e(e,t){e.$$.dirty[0]===-1&&(ee.push(e),We(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Re(e,t,n,o,l,s,c,h=[-1]){const p=ce;se(e);const i=e.$$={fragment:null,ctx:[],props:s,update:Y,not_equal:l,bound:xe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(p?p.$$.context:[])),callbacks:xe(),dirty:h,skip_bound:!1,root:t.target||p.$$.root};c&&c(i.root);let u=!1;if(i.ctx=n?n(e,t.props||{},(g,P,...q)=>{const Q=q.length?q[0]:P;return i.ctx&&l(i.ctx[g],i.ctx[g]=Q)&&(!i.skip_bound&&i.bound[g]&&i.bound[g](Q),u&&$e(e,g)),P}):[],i.update(),u=!0,oe(i.before_update),i.fragment=o?o(i.ctx):!1,t.target){if(t.hydrate){const g=Be(t.target);i.fragment&&i.fragment.l(g),g.forEach(L)}else i.fragment&&i.fragment.c();t.intro&&ue(e.$$.fragment),je(e,t.target,t.anchor,t.customElement),Oe()}se(p)}class Ae{$destroy(){ze(this,1),this.$destroy=Y}$on(t,n){if(!Pe(n))return Y;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const l=o.indexOf(n);l!==-1&&o.splice(l,1)}}$set(t){this.$$set&&!Ve(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function ke(e,t,n){const o=e.slice();return o[7]=t[n],o[9]=n,o}function Ie(e){let t,n,o,l,s=e[7]+"",c,h,p;return{c(){t=a("div"),n=a("input"),o=y(),l=a("label"),c=C(s),b(n,"type","checkbox"),b(n,"id","proposition"),b(n,"name","proposition"),n.value=e[9],b(l,"for",e[9]),b(l,"class","svelte-11q0let"),b(t,"class","proposition")},m(i,u){k(i,t,u),r(t,n),r(t,o),r(t,l),r(l,c),h||(p=te(n,"click",e[4]),h=!0)},p(i,u){u&4&&s!==(s=i[7]+"")&&U(c,s)},d(i){i&&L(t),h=!1,p()}}}function et(e){let t,n,o,l,s,c,h,p,i,u,g=e[1].index+"",P,q,Q,H,j,R,m,d,S,W,I=e[2],E=[];for(let v=0;v<I.length;v+=1)E[v]=Ie(ke(e,I,v));return{c(){t=a("main"),n=a("div"),o=a("h1"),l=C("Question "),s=C(e[0]),c=C("/"),h=C(e[3]),p=y(),i=a("h3"),u=C("id : "),P=C(g),q=y(),Q=a("div"),H=a("div"),j=y(),R=a("br"),m=y(),d=a("div");for(let v=0;v<E.length;v+=1)E[v].c();S=y(),W=a("br"),b(H,"id","questionTexte"),b(d,"class","propositions"),b(Q,"class","enonce"),b(n,"class","question")},m(v,O){k(v,t,O),r(t,n),r(n,o),r(o,l),r(o,s),r(o,c),r(o,h),r(n,p),r(n,i),r(i,u),r(i,P),r(n,q),r(n,Q),r(Q,H),r(Q,j),r(Q,R),r(Q,m),r(Q,d);for(let x=0;x<E.length;x+=1)E[x]&&E[x].m(d,null);r(d,S),r(d,W)},p(v,[O]){if(O&1&&U(s,v[0]),O&8&&U(h,v[3]),O&2&&g!==(g=v[1].index+"")&&U(P,g),O&20){I=v[2];let x;for(x=0;x<I.length;x+=1){const K=ke(v,I,x);E[x]?E[x].p(K,O):(E[x]=Ie(K),E[x].c(),E[x].m(d,S))}for(;x<E.length;x+=1)E[x].d(1);E.length=I.length}},i:Y,o:Y,d(v){v&&L(t),De(E,v)}}}function tt(){const e=[];return document.querySelectorAll("input[type=checkbox]").forEach(t=>{t.checked&&e.push(t.value)}),e}function nt(e,t,n){let{question:o}=t,{propositions:l}=t,{onSelectedValue:s}=t,{nbQuestions:c}=t,{cpt:h=0}=t;function p(){const u=tt();s(u)}function i(){var u=document.getElementById("questionTexte");u.innerHTML=o.texte,MathJax.typesetPromise([u]).catch(g=>console.error(g))}return Fe(()=>{i(),document.querySelectorAll("input[type=checkbox]").forEach(u=>{u.checked=!1}),n(0,h++,h)}),e.$$set=u=>{"question"in u&&n(1,o=u.question),"propositions"in u&&n(2,l=u.propositions),"onSelectedValue"in u&&n(5,s=u.onSelectedValue),"nbQuestions"in u&&n(3,c=u.nbQuestions),"cpt"in u&&n(0,h=u.cpt)},[h,o,l,c,p,s,i]}class ot extends Ae{constructor(t){super(),Re(this,t,nt,et,Te,{question:1,propositions:2,onSelectedValue:5,nbQuestions:3,cpt:0,compileFormuleMathematique:6})}get compileFormuleMathematique(){return this.$$.ctx[6]}}function rt(e){let t,n,o,l,s,c,h,p,i,u,g,P,q,Q,H;function j(d,S){if(d[10]==null)return it;if(d[10]!="")return lt}let R=j(e),m=R&&R(e);return{c(){t=a("h1"),t.textContent="Bienvenue !",n=y(),m&&m.c(),o=y(),l=a("h3"),s=C("Le quiz contient "),c=C(e[7]),h=C(" questions. "),p=a("br"),i=C(`
        Si vous etes prêt(e) appuyez sur le bouton commencer !`),u=y(),g=a("br"),P=y(),q=a("button"),q.textContent="Commencer",b(q,"id","btnStart"),b(q,"class","svelte-6vchrc")},m(d,S){k(d,t,S),k(d,n,S),m&&m.m(d,S),k(d,o,S),k(d,l,S),r(l,s),r(l,c),r(l,h),r(l,p),r(l,i),k(d,u,S),k(d,g,S),k(d,P,S),k(d,q,S),Q||(H=te(q,"click",e[12]),Q=!0)},p(d,S){m&&m.p(d,S),S[0]&128&&U(c,d[7])},d(d){d&&L(t),d&&L(n),m&&m.d(d),d&&L(o),d&&L(l),d&&L(u),d&&L(g),d&&L(P),d&&L(q),Q=!1,H()}}}function lt(e){let t;return{c(){t=a("h3"),t.textContent=`Bonjour ${e[10]}`},m(n,o){k(n,t,o)},p:Y,d(n){n&&L(t)}}}function it(e){let t,n,o,l,s,c,h,p;return{c(){t=C(`Entrez votre pseudo (facultatif)
        `),n=a("br"),o=y(),l=a("br"),s=y(),c=a("input"),h=y(),p=a("br"),b(c,"id","pseudo"),b(c,"type","text"),B(c,"border-radius","5%"),b(c,"maxlength","15"),b(c,"class","svelte-6vchrc")},m(i,u){k(i,t,u),k(i,n,u),k(i,o,u),k(i,l,u),k(i,s,u),k(i,c,u),k(i,h,u),k(i,p,u)},p:Y,d(i){i&&L(t),i&&L(n),i&&L(o),i&&L(l),i&&L(s),i&&L(c),i&&L(h),i&&L(p)}}}function Me(e){let t,n;return t=new ot({props:{question:e[0][e[1]],propositions:e[2][e[1]],onSelectedValue:e[11],nbQuestions:e[0].length}}),{c(){Ze(t.$$.fragment)},m(o,l){je(t,o,l),n=!0},p(o,l){const s={};l[0]&3&&(s.question=o[0][o[1]]),l[0]&6&&(s.propositions=o[2][o[1]]),l[0]&1&&(s.nbQuestions=o[0].length),t.$set(s)},i(o){n||(ue(t.$$.fragment,o),n=!0)},o(o){Ee(t.$$.fragment,o),n=!1},d(o){ze(t,o)}}}function st(e){let t,n,o,l,s,c,h,p,i,u,g,P,q,Q,H,j,R,m,d,S,W,I,E,v,O,x,K,re,fe,ae,de,Z,pe,he,me,F,ye,be,le,J,_e,ve,qe,f,_,M,z,A,N,X,ie,V=e[9]!=null&&rt(e),w=e[0][e[1]]&&Me(e);return{c(){t=a("main"),n=a("div"),V&&V.c(),o=y(),l=a("div"),w&&w.c(),s=y(),c=a("button"),c.textContent="Next",h=y(),p=a("div"),i=C("Score : "),u=C(e[3]),g=C(" / 20"),P=y(),q=a("div"),Q=C("Temps: "),H=C(e[8]),j=C("s"),R=y(),m=a("div"),d=C("Nombre de bonne réponse : "),S=C(e[4]),W=y(),I=a("br"),E=C(` Nombre de mauvaise
    réponse : `),v=C(e[5]),O=y(),x=a("br"),K=C(" Nombre de question sauté : "),re=C(e[6]),fe=y(),ae=a("br"),de=y(),Z=a("div"),pe=y(),he=a("br"),me=y(),F=a("button"),F.textContent="Voir le corrigé",ye=y(),be=a("br"),le=y(),J=a("button"),J.textContent="Caché le corrigé",_e=y(),ve=a("br"),qe=y(),f=a("br"),_=y(),M=a("button"),M.textContent="Rejouer",z=y(),A=a("div"),b(n,"class","accueil"),b(l,"class","question"),B(l,"display","none"),b(c,"id","btnNext"),B(c,"display","none"),b(c,"class","svelte-6vchrc"),b(p,"class","score"),B(p,"display","none"),b(q,"class","timer"),B(q,"display","none"),b(m,"class","detailsQuestions"),B(m,"display","none"),b(Z,"id","ligneEnonceCompile"),B(Z,"margin-bottom","5rem"),b(F,"id","voirCorrection"),B(F,"display","none"),b(F,"class","svelte-6vchrc"),b(J,"id","cacherCorrection"),B(J,"display","none"),b(J,"class","svelte-6vchrc"),b(M,"id","btnRejouer"),B(M,"display","none"),b(M,"class","svelte-6vchrc")},m(T,D){k(T,t,D),r(t,n),V&&V.m(n,null),r(t,o),r(t,l),w&&w.m(l,null),r(t,s),r(t,c),r(t,h),r(t,p),r(p,i),r(p,u),r(p,g),r(t,P),r(t,q),r(q,Q),r(q,H),r(q,j),r(t,R),r(t,m),r(m,d),r(m,S),r(m,W),r(m,I),r(m,E),r(m,v),r(m,O),r(m,x),r(m,K),r(m,re),r(t,fe),r(t,ae),r(t,de),r(t,Z),r(t,pe),r(t,he),r(t,me),r(t,F),r(t,ye),r(t,be),r(t,le),r(t,J),r(t,_e),r(t,ve),r(t,qe),r(t,f),r(t,_),r(t,M),r(t,z),r(t,A),N=!0,X||(ie=[te(c,"click",e[13]),te(F,"click",e[15]),te(J,"click",e[16]),te(M,"click",e[14])],X=!0)},p(T,D){T[9]!=null&&V.p(T,D),T[0][T[1]]?w?(w.p(T,D),D[0]&3&&ue(w,1)):(w=Me(T),w.c(),ue(w,1),w.m(l,null)):w&&(Ge(),Ee(w,1,1,()=>{w=null}),Ye()),(!N||D[0]&8)&&U(u,T[3]),(!N||D[0]&256)&&U(H,T[8]),(!N||D[0]&16)&&U(S,T[4]),(!N||D[0]&32)&&U(v,T[5]),(!N||D[0]&64)&&U(re,T[6])},i(T){N||(ue(w),N=!0)},o(T){Ee(w),N=!1},d(T){T&&L(t),V&&V.d(),w&&w.d(),X=!1,oe(ie)}}}function ut(){return Date.now().toString()}function ct(){let e=localStorage.getItem("userID");return e||(e=ut(),localStorage.setItem("userID",e)),e}function ft(e,t,n){let o,l=[],s=[],c=0,h=[],p=[],i=null,u=0,g=0,P=0,q=0,Q=[];const H=new URLSearchParams(window.location.search),j=H.get("c"),R=H.get("r"),m=H.get("p"),d=H.get("i");let S=H.get("n");const W=ct();let I=[],E,v,O=0;Ue(()=>{ae(),_e()});function x(){v=setInterval(()=>{n(8,O++,O)},1e3)}function K(){clearInterval(v)}function re(f){i=f}function fe(){for(let f=s.length-1;f>0;f--){const _=Math.floor(Math.random()*(f+1));n(0,[s[f],s[_]]=[s[_],s[f]],s),n(2,[h[f],h[_]]=[h[_],h[f]],h),[p[f],p[_]]=[p[_],p[f]]}}async function ae(){try{o=await(await fetch("https://raw.githubusercontent.com/Phil1010/quiz-exo7-stage2023/main/catalogue.json")).json(),de()}catch(f){console.error("Erreur lors de la récupération des données :",f)}j!=null&&J()}function de(){o&&(o.forEach((f,_)=>{if(l.includes(_)){const M={index:_,texte:f.texte};n(0,s=[...s,M]),n(2,h=[...h,f.reponses.map(z=>z.texte)]),p=[...p,f.reponses.map(z=>z.correct)]}}),R=="1"&&fe())}function Z(){document.querySelector(".accueil").style.display="none",document.querySelector("#btnNext").style.display="",document.querySelector(".question").style.display="",x()}function pe(){if(n(1,c++,c),i==p[c-1].indexOf(!0))n(3,u++,u),n(4,g++,g),I.push(1);else if(i==null||i.length>1)n(6,q++,q),I.push(0);else{const f=u-le/100;n(3,u=f),n(5,P++,P),I.push(-1)}c==s.length&&(u<0&&n(3,u=0),n(3,u=u*20/s.length),he()),Q.push(h[c-1][i]),i=null}function he(){document.querySelector(".score").style.display="",document.querySelector("#btnNext").style.display="none",document.querySelector("#btnRejouer").style.display="",document.querySelector(".timer").style.display="",document.querySelector(".detailsQuestions").style.display="",document.querySelector("#voirCorrection").style.display="",K(),I=I.map(f=>{if(f==-1)return 2;if(f==0)return 0;if(f==1)return 1}),I=I.join(""),me()}function me(){var f={quizID:d,quizContent:j,userID:W,userNick:S,results:I,elapsedTime:O,note:void 0,penalite:m};console.log("La fonction qui envoie l'objet au PHP est appelée"),console.log(f);var _=new XMLHttpRequest,M="http://damienmegy.xyz/php/quizapp-exo7/quiz_fini.php";_.open("POST",M,!0),_.setRequestHeader("Content-Type","application/json"),_.onreadystatechange=function(){_.readyState===4&&(_.status===200?console.log("Données envoyées avec succès !"):console.error("Erreur lors de l'envoi des données."))},_.onerror=function(z){console.error("Erreur lors de l'envoi des données:",z)},_.send(JSON.stringify(f))}function F(){const f=document.getElementById("pseudo");if(f!==null){const _=f.value,M=new URL(window.location.href);_!==""&&M.searchParams.set("n",_),window.location.href=M.toString()}S!=null&&(console.log("il a déjà un pseudo"),window.location.reload())}function ye(){be(),document.querySelector("#voirCorrection").style.display="none",document.querySelector("#cacherCorrection").style.display=""}function be(){var f=document.getElementById("ligneEnonceCompile"),_=document.createElement("table");_.style.borderCollapse="collapse";var M=_.insertRow(),z=M.insertCell();z.innerHTML="Questions",z.style.fontWeight="bold",z.style.border="1px solid white";var A=M.insertCell();A.innerHTML="Corrections",A.style.fontWeight="bold",A.style.border="1px solid white";var A=M.insertCell();A.innerHTML="Vos réponses",A.style.fontWeight="bold",A.style.border="1px solid white",s.forEach(N=>{var X=_.insertRow(),ie=X.insertCell();ie.innerHTML="Q."+[s.indexOf(N)+1]+"/"+E+" Id."+N.index+" : "+N.texte,ie.style.border="1px solid white";var V=X.insertCell();V.innerHTML=h[s.indexOf(N)][p[s.indexOf(N)].indexOf(!0)],V.style.border="1px solid white";var w=X.insertCell();w.innerHTML=Q[s.indexOf(N)],w.style.border="1px solid white",w.innerHTML=="undefined"&&(w.innerHTML="Question sauté / Réponse invalide")}),f.appendChild(_),MathJax.typesetPromise([f]).catch(N=>console.error(N))}let le=0;if(m){const f=parseInt(m);!isNaN(f)&&f>=0&&f<=100?le=f:console.error("Erreur lors de la récupération du pourcentage de pénalité :",m)}function J(){n(7,E=j.split(" ").length)}function _e(){if(j==null){document.querySelector(".accueil").innerHTML="<h1>Bienvenue !</h1> <br> <h3>Pour commencer, veuillez saisir une liste de question dans les paramètres de l'URL. <br> Voici par exemple un quiz contenant les question : 1,2,3,4 et 5 avec l'ordre d'affichage des questions randomnisées et sans pénalité : <br> <a href='https://phil1010.github.io/quizapp-exo7/?c=1+2+3+4+5&r=1&p=0'>https://phil1010.github.io/quizapp-exo7/?c=1+2+3+4+5&r=1&p=0</a> </h3> ",document.querySelector("#btnNext").style.display="none";return}l.push(...j.split(" ")),l=l.map(f=>parseInt(f))}function ve(){}return[s,c,h,u,g,P,q,E,O,j,S,re,Z,pe,F,ye,()=>{document.querySelector("#voirCorrection").style.display="",document.querySelector("#cacherCorrection").style.display="none",document.querySelector("#ligneEnonceCompile").innerHTML=""}]}class at extends Ae{constructor(t){super(),Re(this,t,ft,st,Te,{},null,[-1,-1])}}new at({target:document.getElementById("app")});
