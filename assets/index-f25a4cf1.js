(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const f of i.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(l){if(l.ep)return;l.ep=!0;const i=n(l);fetch(l.href,i)}})();function te(){}function Ie(e){return e()}function Ee(){return Object.create(null)}function ne(e){e.forEach(Ie)}function Me(e){return typeof e=="function"}function He(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Ae(e){return Object.keys(e).length===0}function r(e,t){e.appendChild(t)}function N(e,t,n){e.insertBefore(t,n||null)}function L(e){e.parentNode&&e.parentNode.removeChild(e)}function Ve(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function d(e){return document.createElement(e)}function q(e){return document.createTextNode(e)}function b(){return q(" ")}function $(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function _(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Be(e){return Array.from(e.childNodes)}function F(e,t){t=""+t,e.data!==t&&(e.data=t)}function U(e,t,n,o){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}let se;function le(e){se=e}function Oe(){if(!se)throw new Error("Function called outside component initialization");return se}function Fe(e){Oe().$$.on_mount.push(e)}function Ue(e){Oe().$$.after_update.push(e)}const Z=[],Qe=[];let ee=[];const Le=[],Je=Promise.resolve();let we=!1;function Xe(){we||(we=!0,Je.then(Pe))}function Ce(e){ee.push(e)}const Se=new Set;let Y=0;function Pe(){if(Y!==0)return;const e=se;do{try{for(;Y<Z.length;){const t=Z[Y];Y++,le(t),We(t.$$)}}catch(t){throw Z.length=0,Y=0,t}for(le(null),Z.length=0,Y=0;Qe.length;)Qe.pop()();for(let t=0;t<ee.length;t+=1){const n=ee[t];Se.has(n)||(Se.add(n),n())}ee.length=0}while(Z.length);for(;Le.length;)Le.pop()();we=!1,Se.clear(),le(e)}function We(e){if(e.fragment!==null){e.update(),ne(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Ce)}}function Ke(e){const t=[],n=[];ee.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),ee=t}const ve=new Set;let K;function Ge(){K={r:0,c:[],p:K}}function Ye(){K.r||ne(K.c),K=K.p}function ie(e,t){e&&e.i&&(ve.delete(e),e.i(t))}function xe(e,t,n,o){if(e&&e.o){if(ve.has(e))return;ve.add(e),K.c.push(()=>{ve.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}else o&&o()}function Ze(e){e&&e.c()}function ze(e,t,n,o){const{fragment:l,after_update:i}=e.$$;l&&l.m(t,n),o||Ce(()=>{const f=e.$$.on_mount.map(Ie).filter(Me);e.$$.on_destroy?e.$$.on_destroy.push(...f):ne(f),e.$$.on_mount=[]}),i.forEach(Ce)}function Re(e,t){const n=e.$$;n.fragment!==null&&(Ke(n.after_update),ne(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function $e(e,t){e.$$.dirty[0]===-1&&(Z.push(e),Xe(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function je(e,t,n,o,l,i,f,m=[-1]){const h=se;le(e);const s=e.$$={fragment:null,ctx:[],props:i,update:te,not_equal:l,bound:Ee(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(h?h.$$.context:[])),callbacks:Ee(),dirty:m,skip_bound:!1,root:t.target||h.$$.root};f&&f(s.root);let u=!1;if(s.ctx=n?n(e,t.props||{},(w,I,...C)=>{const E=C.length?C[0]:I;return s.ctx&&l(s.ctx[w],s.ctx[w]=E)&&(!s.skip_bound&&s.bound[w]&&s.bound[w](E),u&&$e(e,w)),I}):[],s.update(),u=!0,ne(s.before_update),s.fragment=o?o(s.ctx):!1,t.target){if(t.hydrate){const w=Be(t.target);s.fragment&&s.fragment.l(w),w.forEach(L)}else s.fragment&&s.fragment.c();t.intro&&ie(e.$$.fragment),ze(e,t.target,t.anchor,t.customElement),Pe()}le(h)}class De{$destroy(){Re(this,1),this.$destroy=te}$on(t,n){if(!Me(n))return te;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const l=o.indexOf(n);l!==-1&&o.splice(l,1)}}$set(t){this.$$set&&!Ae(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function ke(e,t,n){const o=e.slice();return o[7]=t[n],o[9]=n,o}function Ne(e){let t,n,o,l,i=e[7]+"",f,m,h;return{c(){t=d("div"),n=d("input"),o=b(),l=d("label"),f=q(i),_(n,"type","checkbox"),_(n,"id","proposition"),_(n,"name","proposition"),n.value=e[9],_(l,"for",e[9]),_(l,"class","svelte-11q0let"),_(t,"class","proposition")},m(s,u){N(s,t,u),r(t,n),r(t,o),r(t,l),r(l,f),m||(h=$(n,"click",e[4]),m=!0)},p(s,u){u&4&&i!==(i=s[7]+"")&&F(f,i)},d(s){s&&L(t),m=!1,h()}}}function et(e){let t,n,o,l,i,f,m,h,s,u,w=e[1].index+"",I,C,E,P,O,T,y,a,S,j,D=e[2],g=[];for(let v=0;v<D.length;v+=1)g[v]=Ne(ke(e,D,v));return{c(){t=d("main"),n=d("div"),o=d("h1"),l=q("Question "),i=q(e[0]),f=q("/"),m=q(e[3]),h=b(),s=d("h3"),u=q("id : "),I=q(w),C=b(),E=d("div"),P=d("div"),O=b(),T=d("br"),y=b(),a=d("div");for(let v=0;v<g.length;v+=1)g[v].c();S=b(),j=d("br"),_(P,"id","questionTexte"),_(a,"class","propositions"),_(E,"class","enonce"),_(n,"class","question")},m(v,z){N(v,t,z),r(t,n),r(n,o),r(o,l),r(o,i),r(o,f),r(o,m),r(n,h),r(n,s),r(s,u),r(s,I),r(n,C),r(n,E),r(E,P),r(E,O),r(E,T),r(E,y),r(E,a);for(let x=0;x<g.length;x+=1)g[x]&&g[x].m(a,null);r(a,S),r(a,j)},p(v,[z]){if(z&1&&F(i,v[0]),z&8&&F(m,v[3]),z&2&&w!==(w=v[1].index+"")&&F(I,w),z&20){D=v[2];let x;for(x=0;x<D.length;x+=1){const W=ke(v,D,x);g[x]?g[x].p(W,z):(g[x]=Ne(W),g[x].c(),g[x].m(a,S))}for(;x<g.length;x+=1)g[x].d(1);g.length=D.length}},i:te,o:te,d(v){v&&L(t),Ve(g,v)}}}function tt(){const e=[];return document.querySelectorAll("input[type=checkbox]").forEach(t=>{t.checked&&e.push(t.value)}),e}function nt(e,t,n){let{question:o}=t,{propositions:l}=t,{onSelectedValue:i}=t,{nbQuestions:f}=t,{cpt:m=0}=t;function h(){const u=tt();i(u)}function s(){var u=document.getElementById("questionTexte");u.innerHTML=o.texte,MathJax.typesetPromise([u]).catch(w=>console.error(w))}return Ue(()=>{s(),document.querySelectorAll("input[type=checkbox]").forEach(u=>{u.checked=!1}),n(0,m++,m)}),e.$$set=u=>{"question"in u&&n(1,o=u.question),"propositions"in u&&n(2,l=u.propositions),"onSelectedValue"in u&&n(5,i=u.onSelectedValue),"nbQuestions"in u&&n(3,f=u.nbQuestions),"cpt"in u&&n(0,m=u.cpt)},[m,o,l,f,h,i,s]}class ot extends De{constructor(t){super(),je(this,t,nt,et,He,{question:1,propositions:2,onSelectedValue:5,nbQuestions:3,cpt:0,compileFormuleMathematique:6})}get compileFormuleMathematique(){return this.$$.ctx[6]}}function rt(e){let t,n,o,l,i,f,m,h,s,u,w,I,C,E,P;function O(a,S){if(a[7]==null)return it;if(a[7]!="")return lt}let T=O(e),y=T&&T(e);return{c(){t=d("h1"),t.textContent="Bienvenue !",n=b(),y&&y.c(),o=b(),l=d("h3"),i=q("Le quiz contient "),f=q(e[8]),m=q(" questions. "),h=d("br"),s=q(`
        Si vous etes prêt(e) appuyez sur le bouton commencer !`),u=b(),w=d("br"),I=b(),C=d("button"),C.textContent="Commencer",_(C,"id","btnStart"),_(C,"class","svelte-6vchrc")},m(a,S){N(a,t,S),N(a,n,S),y&&y.m(a,S),N(a,o,S),N(a,l,S),r(l,i),r(l,f),r(l,m),r(l,h),r(l,s),N(a,u,S),N(a,w,S),N(a,I,S),N(a,C,S),E||(P=$(C,"click",e[12]),E=!0)},p(a,S){T===(T=O(a))&&y?y.p(a,S):(y&&y.d(1),y=T&&T(a),y&&(y.c(),y.m(o.parentNode,o))),S[0]&256&&F(f,a[8])},d(a){a&&L(t),a&&L(n),y&&y.d(a),a&&L(o),a&&L(l),a&&L(u),a&&L(w),a&&L(I),a&&L(C),E=!1,P()}}}function lt(e){let t,n,o;return{c(){t=d("h3"),n=q("Bonjour "),o=q(e[7])},m(l,i){N(l,t,i),r(t,n),r(t,o)},p(l,i){i[0]&128&&F(o,l[7])},d(l){l&&L(t)}}}function it(e){let t,n,o,l,i,f,m,h;return{c(){t=q(`Entrez votre pseudo (facultatif)
        `),n=d("br"),o=b(),l=d("br"),i=b(),f=d("input"),m=b(),h=d("br"),_(f,"id","pseudo"),_(f,"type","text"),U(f,"border-radius","5%"),_(f,"maxlength","15"),_(f,"class","svelte-6vchrc")},m(s,u){N(s,t,u),N(s,n,u),N(s,o,u),N(s,l,u),N(s,i,u),N(s,f,u),N(s,m,u),N(s,h,u)},p:te,d(s){s&&L(t),s&&L(n),s&&L(o),s&&L(l),s&&L(i),s&&L(f),s&&L(m),s&&L(h)}}}function Te(e){let t,n;return t=new ot({props:{question:e[0][e[1]],propositions:e[2][e[1]],onSelectedValue:e[11],nbQuestions:e[0].length}}),{c(){Ze(t.$$.fragment)},m(o,l){ze(t,o,l),n=!0},p(o,l){const i={};l[0]&3&&(i.question=o[0][o[1]]),l[0]&6&&(i.propositions=o[2][o[1]]),l[0]&1&&(i.nbQuestions=o[0].length),t.$set(i)},i(o){n||(ie(t.$$.fragment,o),n=!0)},o(o){xe(t.$$.fragment,o),n=!1},d(o){Re(t,o)}}}function st(e){let t,n,o,l,i,f,m,h,s,u,w,I,C,E,P,O,T,y,a,S,j,D,g,v,z,x,W,oe,ue,ce,fe,G,ae,de,pe,J,he,me,ye,X,re,be,_e,ge,qe,c,p,R,M,A,V,B=e[10]!=null&&rt(e),Q=e[0][e[1]]&&Te(e);return{c(){t=d("main"),n=d("div"),B&&B.c(),o=b(),l=d("div"),Q&&Q.c(),i=b(),f=d("button"),f.textContent="Next",m=b(),h=d("div"),s=q("Score : "),u=q(e[3]),w=q(" / 20"),I=b(),C=d("div"),E=q("Temps: "),P=q(e[9]),O=q("s"),T=b(),y=d("div"),a=q("Nombre de bonne réponse : "),S=q(e[4]),j=b(),D=d("br"),g=q(` Nombre de mauvaise
    réponse : `),v=q(e[5]),z=b(),x=d("br"),W=q(" Nombre de question sauté : "),oe=q(e[6]),ue=b(),ce=d("br"),fe=b(),G=d("div"),ae=b(),de=d("br"),pe=b(),J=d("button"),J.textContent="Voir le corrigé",he=b(),me=d("br"),ye=b(),X=d("button"),X.textContent="Caché le corrigé",re=b(),be=d("br"),_e=b(),ge=d("br"),qe=b(),c=d("button"),c.textContent="Rejouer",p=b(),R=d("div"),_(n,"class","accueil"),_(l,"class","question"),U(l,"display","none"),_(f,"id","btnNext"),U(f,"display","none"),_(f,"class","svelte-6vchrc"),_(h,"class","score"),U(h,"display","none"),_(C,"class","timer"),U(C,"display","none"),_(y,"class","detailsQuestions"),U(y,"display","none"),_(G,"id","ligneEnonceCompile"),U(G,"margin-bottom","5rem"),_(J,"id","voirCorrection"),U(J,"display","none"),_(J,"class","svelte-6vchrc"),_(X,"id","cacherCorrection"),U(X,"display","none"),_(X,"class","svelte-6vchrc"),_(c,"id","btnRejouer"),U(c,"display","none"),_(c,"class","svelte-6vchrc")},m(k,H){N(k,t,H),r(t,n),B&&B.m(n,null),r(t,o),r(t,l),Q&&Q.m(l,null),r(t,i),r(t,f),r(t,m),r(t,h),r(h,s),r(h,u),r(h,w),r(t,I),r(t,C),r(C,E),r(C,P),r(C,O),r(t,T),r(t,y),r(y,a),r(y,S),r(y,j),r(y,D),r(y,g),r(y,v),r(y,z),r(y,x),r(y,W),r(y,oe),r(t,ue),r(t,ce),r(t,fe),r(t,G),r(t,ae),r(t,de),r(t,pe),r(t,J),r(t,he),r(t,me),r(t,ye),r(t,X),r(t,re),r(t,be),r(t,_e),r(t,ge),r(t,qe),r(t,c),r(t,p),r(t,R),M=!0,A||(V=[$(f,"click",e[13]),$(J,"click",e[15]),$(X,"click",e[16]),$(c,"click",e[14])],A=!0)},p(k,H){k[10]!=null&&B.p(k,H),k[0][k[1]]?Q?(Q.p(k,H),H[0]&3&&ie(Q,1)):(Q=Te(k),Q.c(),ie(Q,1),Q.m(l,null)):Q&&(Ge(),xe(Q,1,1,()=>{Q=null}),Ye()),(!M||H[0]&8)&&F(u,k[3]),(!M||H[0]&512)&&F(P,k[9]),(!M||H[0]&16)&&F(S,k[4]),(!M||H[0]&32)&&F(v,k[5]),(!M||H[0]&64)&&F(oe,k[6])},i(k){M||(ie(Q),M=!0)},o(k){xe(Q),M=!1},d(k){k&&L(t),B&&B.d(),Q&&Q.d(),A=!1,ne(V)}}}function ut(){return Date.now().toString()}function ct(){let e=localStorage.getItem("userID");return e||(e=ut(),localStorage.setItem("userID",e)),e}function ft(e,t,n){let o,l=[],i=[],f=0,m=[],h=[],s=null,u=0,w=0,I=0,C=0,E=0,P=[];const O=new URLSearchParams(window.location.search),T=O.get("c"),y=O.get("r"),a=O.get("p");let S=O.get("i"),j=O.get("n");const D=ct();let g=[],v,z,x=0;Fe(()=>{fe(),_e()});function W(){z=setInterval(()=>{n(9,x++,x)},1e3)}function oe(){clearInterval(z)}function ue(c){s=c}function ce(){for(let c=i.length-1;c>0;c--){const p=Math.floor(Math.random()*(c+1));n(0,[i[c],i[p]]=[i[p],i[c]],i),n(2,[m[c],m[p]]=[m[p],m[c]],m),[h[c],h[p]]=[h[p],h[c]]}}async function fe(){try{o=await(await fetch("https://raw.githubusercontent.com/Phil1010/quiz-exo7-stage2023/main/catalogue.json")).json(),G()}catch(c){console.error("Erreur lors de la récupération des données :",c)}T!=null&&be()}function G(){o&&(o.forEach((c,p)=>{if(l.includes(p)){const R={index:p,texte:c.texte};n(0,i=[...i,R]),n(2,m=[...m,c.reponses.map(M=>M.texte)]),h=[...h,c.reponses.map(M=>M.correct)]}}),y=="1"&&ce())}function ae(){document.querySelector(".accueil").style.display="none",document.querySelector("#btnNext").style.display="",document.querySelector(".question").style.display="",W()}function de(){if(n(1,f++,f),s==h[f-1].indexOf(!0))n(3,u++,u),n(4,I++,I),g.push(1);else if(s==null||s.length>1)n(6,E++,E),g.push(0);else{const c=u-re/100;n(3,u=c),n(5,C++,C),g.push(-1)}f==i.length&&(u<0&&n(3,u=0),n(3,u=u*20/i.length),pe()),P.push(m[f-1][s]),s=null}function pe(){document.querySelector(".score").style.display="",document.querySelector("#btnNext").style.display="none",document.querySelector("#btnRejouer").style.display="",document.querySelector(".timer").style.display="",document.querySelector(".detailsQuestions").style.display="",document.querySelector("#voirCorrection").style.display="",oe(),ge(),g=g.map(c=>{if(c==-1)return 2;if(c==0)return 0;if(c==1)return 1}),g=g.join(""),J(),he()}function J(){S==null&&(S=""),j==null&&n(7,j="");var c=JSON.stringify({quizID:S,quizContent:T,userID:D,userNick:j,results:g,elapsedTime:x,note:w.toString(),penalite:a}),p=new XMLHttpRequest;p.open("POST","http://localhost/quizapp-exo7/backend/quiz_fini.php",!0),p.setRequestHeader("Content-Type","application/json"),p.onreadystatechange=function(){p.readyState===XMLHttpRequest.DONE&&(p.status===200?console.log("Réponse du serveur :",p.responseText):console.error("Erreur lors de la requête :",p.status,p.statusText))},p.send(c)}function he(){var c=S,p=new XMLHttpRequest;p.open("POST","http://localhost/quizapp-exo7/backend/quiz_stats.php",!0),p.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),p.onreadystatechange=function(){p.readyState===XMLHttpRequest.DONE&&(p.status===200?console.log("Réponse du serveur :",p.responseText):console.error("Erreur lors de la requête :",p.status,p.statusText))};var R=JSON.stringify({quizID:c});p.send(R)}function me(){const c=document.getElementById("pseudo");if(c!==null){const p=c.value,R=new URL(window.location.href);p!==""&&R.searchParams.set("n",p),window.location.href=R.toString()}j!=null&&(console.log("il a déjà un pseudo"),window.location.reload())}function ye(){X(),document.querySelector("#voirCorrection").style.display="none",document.querySelector("#cacherCorrection").style.display=""}function X(){var c=document.getElementById("ligneEnonceCompile"),p=document.createElement("table");p.style.borderCollapse="collapse";var R=p.insertRow(),M=R.insertCell();M.innerHTML="Questions",M.style.fontWeight="bold",M.style.border="1px solid white";var A=R.insertCell();A.innerHTML="Corrections",A.style.fontWeight="bold",A.style.border="1px solid white";var A=R.insertCell();A.innerHTML="Vos réponses",A.style.fontWeight="bold",A.style.border="1px solid white",i.forEach(V=>{var B=p.insertRow(),Q=B.insertCell();Q.innerHTML="Q."+[i.indexOf(V)+1]+"/"+v+" Id."+V.index+" : "+V.texte,Q.style.border="1px solid white";var k=B.insertCell();k.innerHTML=m[i.indexOf(V)][h[i.indexOf(V)].indexOf(!0)],k.style.border="1px solid white";var H=B.insertCell();H.innerHTML=P[i.indexOf(V)],H.style.border="1px solid white",H.innerHTML=="undefined"&&(H.innerHTML="Question sauté / Réponse invalide")}),c.appendChild(p),MathJax.typesetPromise([c]).catch(V=>console.error(V))}let re=0;if(a){const c=parseInt(a);!isNaN(c)&&c>=0&&c<=100?re=c:console.error("Erreur lors de la récupération du pourcentage de pénalité :",a)}function be(){n(8,v=T.split(" ").length)}function _e(){if(T==null){document.querySelector(".accueil").innerHTML="<h1>Bienvenue !</h1> <br> <h3>Pour commencer, veuillez saisir une liste de question dans les paramètres de l'URL. <br> Voici par exemple un quiz contenant les question : 1,2,3,4 et 5 avec l'ordre d'affichage des questions randomnisées et sans pénalité : <br> <a href='https://phil1010.github.io/quizapp-exo7/?c=1+2+3+4+5&r=1&p=0'>https://phil1010.github.io/quizapp-exo7/?c=1+2+3+4+5&r=1&p=0</a> </h3> ",document.querySelector("#btnNext").style.display="none";return}l.push(...T.split(" ")),l=l.map(c=>parseInt(c))}function ge(){w=u*100/20}return[i,f,m,u,I,C,E,j,v,x,T,ue,ae,de,me,ye,()=>{document.querySelector("#voirCorrection").style.display="",document.querySelector("#cacherCorrection").style.display="none",document.querySelector("#ligneEnonceCompile").innerHTML=""}]}class at extends De{constructor(t){super(),je(this,t,ft,st,He,{},null,[-1,-1])}}new at({target:document.getElementById("app")});
